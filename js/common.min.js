const popupOpen=document.querySelector(".button-popup"),popupMain=document.querySelector(".popup"),popupClose=document.querySelector(".button-close"),popupForm=document.querySelector(".submit-form"),userName=document.querySelector(".js-name"),userEmail=document.querySelector(".js-email");let isStorageSupport=!0,storage="";try{storage=localStorage.getItem("login")}catch(e){isStorageSupport=!1}popupOpen.addEventListener("click",function(e){e.preventDefault(),popupMain.classList.add("popup-visible"),storage?(userName.value=storage,userEmail.focus()):userName.focus()}),popupClose.addEventListener("click",function(e){popupMain.classList.remove("popup-visible"),popupMain.classList.remove("popup-error")}),popupForm.addEventListener("submit",function(e){userName.value&&userEmail.value||(console.log(userName),userName.classList.add("invalid"),userEmail.classList.add("invalid"))}),popupForm.addEventListener("submit",function(e){userName.value&&userEmail.value?isStorageSupport&&localStorage.setItem("Name",userName.value):(e.preventDefault(),popupMain.classList.remove("popup-error"),popupMain.offsetWidth=popupMain.offsetWidth,popupMain.classList.add("popup-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&popupMain.classList.contains("popup-visible")&&(e.preventDefault(),popupMain.classList.remove("popup-visible"),popupMain.classList.remove("popup-error"))});
